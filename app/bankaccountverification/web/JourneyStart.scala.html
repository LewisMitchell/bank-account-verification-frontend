@*
 * Copyright 2020 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import bankaccountverification.AppConfig
@import bankaccountverification.web.html.Layout
@import bankaccountverification.web.VerificationRequest

@this(layout: Layout, form: FormWithCSRF, input: GovukInput, button: GovukButton, errorSummary: GovukErrorSummary)
@(journeyId: String, detailsForm: Form[VerificationRequest])(implicit request: Request[_], messages: Messages, appConfig: AppConfig)

@layout(pageTitle = Some("Bank Account Verification")) {
    <h1 class="govuk-heading-xl">Bank Account Verification</h1>
    <p class="govuk-body">@{messages("service.text")}</p>


@if(detailsForm.hasErrors) {
    @errorSummary(ErrorSummary(title = HtmlContent(messages("error.summaryText")),
        errorList = detailsForm.errors.map{error ⇒ ErrorLink(href=Some(s"#${error.key}"),
            content = HtmlContent(messages(error.message)))}))
}

@form(bankaccountverification.web.routes.BankAccountVerificationController.verifyDetails(journeyId)) {
      @input(Input(value = detailsForm("accountName").value,
          label = Label(content = HtmlContent(messages("label.account.name"))),
          formGroupClasses = "form-field-group", autocomplete = Some("account-name"),
          name = detailsForm("accountName").name, id = detailsForm("accountName").name, classes = "govuk-input--width-20",
          errorMessage = detailsForm("accountName").error.map(fe ⇒ ErrorMessage(content = HtmlContent(messages(fe.message))))))

      @input(Input(value = detailsForm("sortCode").value,
          label = Label(content = HtmlContent(messages("label.account.sortCode"))),
          formGroupClasses = "form-field-group", autocomplete = Some("account.sortCode"),
          name = detailsForm("sortCode").name, id = detailsForm("sortCode").name, classes = "govuk-input--width-20",
          errorMessage = detailsForm("sortCode").error.map(fe ⇒ ErrorMessage(content = HtmlContent(messages(fe.message))))))

      @input(Input(value = detailsForm("accountNumber").value,
          label = Label(content = HtmlContent(messages("label.account.number"))),
          formGroupClasses = "form-field-group", autocomplete = Some("accountNumber"),
          name = detailsForm("accountNumber").name, id = detailsForm("accountNumber").name, classes = "govuk-input--width-20",
          errorMessage = detailsForm("accountNumber").error.map(fe ⇒ ErrorMessage(content = HtmlContent(messages(fe.message))))))

    @input(Input(value = detailsForm("rollNumber").value,
          label = Label(content = HtmlContent(messages("label.rollNumber"))),
          formGroupClasses = "form-field-group", autocomplete = Some("rollNumber"),
          name = detailsForm("rollNumber").name, id = detailsForm("rollNumber").name, classes = "govuk-input--width-20",
          errorMessage = detailsForm("rollNumber").error.map(fe ⇒ ErrorMessage(content = HtmlContent(messages(fe.message))))))

      @button(Button(content = HtmlContent(messages("label.submitLabel")),
          name = Some("continue"),
          inputType = Some("submit"), attributes = Map("id" → "continue")))
  }
}
